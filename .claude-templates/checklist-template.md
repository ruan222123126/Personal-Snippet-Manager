# 任务完成检查清单模板

## 基础检查清单
适用于所有任务的必要检查项：

```markdown
- [ ] 任务需求完全实现
- [ ] 代码遵循项目规范（单例、路径别名、代码风格）
- [ ] TypeScript 类型检查通过 (`npx tsc --noEmit`)
- [ ] 运行测试并全部通过
- [ ] 任务文件已移到 `finish_task/`
- [ ] 完成报告已写在 `report/`
- [ ] 已发送桌面通知
```

## 双 Claude 系统检查清单
使用双 Claude 协作系统时的额外检查项：

```markdown
- [ ] 任务开始时已启动监视系统 (`npm run duo`)
- [ ] 任务需求完全实现
- [ ] 代码遵循项目模式（单例、路径别名）
- [ ] TypeScript 类型检查通过 (`npx tsc --noEmit`)
- [ ] 验证 Claude 的反馈已处理
- [ ] 任务文件已移到 `finish_task/`
- [ ] 完成报告已写在 `report/`
- [ ] 已发送桌面通知
- [ ] 监视系统已关闭（队列已清理）
```

## 代码质量检查清单

### 类型安全
- [ ] 所有函数都有正确的类型签名
- [ ] 没有使用 `any` 类型（除非有明确原因）
- [ ] 正确处理了 null/undefined 情况
- [ ] 使用了适当的泛型

### 代码规范
- [ ] 遵循项目现有的代码风格
- [ ] 使用了路径别名 `@/`
- [ ] 没有创建重复的单例实例
- [ ] Server Components 优先，Client Components 仅在必要时使用

### 测试验证
- [ ] 手动测试了核心功能
- [ ] 测试了边界情况
- [ ] 测试了错误处理
- [ ] 验证了数据库迁移（如适用）

### 文档更新
- [ ] 更新了相关文档
- [ ] 添加了必要的注释
- [ ] API 变更有 JSDoc 注释
- [ ] README 已更新（如需要）

## 何时使用双 Claude 系统

### 必须使用
- [ ] 实现新功能
- [ ] 代码重构
- [ ] 修复复杂 Bug
- [ ] 修改核心逻辑
- [ ] API 变更

### 可选使用
- [ ] 简单的样式调整
- [ ] 文档更新
- [ ] 配置修改
- [ ] 小型 bug 修复

## 数据库变更检查清单

### Schema 修改
- [ ] 编辑了 `prisma/schema.prisma`
- [ ] 运行了 `npx prisma migrate dev --name 描述性名称`
- [ ] 手动添加了 FTS5 表和触发器到迁移 SQL
- [ ] 运行了 `npx prisma generate`
- [ ] 使用 Prisma Studio 验证了变更

### 数据安全
- [ ] 没有提交 `prisma/dev.db` 文件
- [ ] 没有提交 `prisma/*.db-journal` 文件
- [ ] 环境变量文件已配置

## 安全检查清单

### 输入验证
- [ ] 验证了用户输入
- [ ] 防止了 SQL 注入
- [ ] 防止了 XSS 攻击
- [ ] 防止了 CSRF 攻击（如适用）

### 敏感信息
- [ ] 没有硬编码的密钥/密码
- [ ] 环境变量正确使用
- [ ] 敏感数据已加密（如需要）
- [ ] 日志中没有敏感信息
