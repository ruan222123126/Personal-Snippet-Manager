{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///mnt/Files/Ts-space/apps/snippet-manager/lib/prisma.ts"],"sourcesContent":["// Prisma Client singleton\n// Global reference to prevent multiple instances in development\n\nimport { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient();\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA,0BAA0B;AAC1B,gEAAgE;AAEhE;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,sMAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///mnt/Files/Ts-space/apps/snippet-manager/app/actions.ts"],"sourcesContent":["'use server';\n\nimport { prisma } from '@/lib/prisma';\nimport { revalidatePath } from 'next/cache';\nimport { redirect } from 'next/navigation';\n\n/**\n * 删除代码片段\n *\n * @param id - 代码片段 ID\n * @throws Error 如果代码片段不存在\n */\nexport async function deleteSnippet(id: string) {\n  try {\n    // 先检查代码片段是否存在\n    const snippet = await prisma.snippet.findUnique({\n      where: { id },\n    });\n\n    if (!snippet) {\n      throw new Error('代码片段不存在');\n    }\n\n    // 删除代码片段（关联的标签记录会通过级联删除自动处理）\n    await prisma.snippet.delete({\n      where: { id },\n    });\n\n    // 重新验证首页缓存\n    revalidatePath('/');\n\n    return { success: true };\n  } catch (error) {\n    console.error('删除代码片段失败:', error);\n    throw error;\n  }\n}\n\n/**\n * 删除代码片段并重定向\n *\n * 这个版本用于表单提交，删除成功后自动重定向到首页\n *\n * @param id - 代码片段 ID\n */\nexport async function deleteSnippetAndRedirect(id: string) {\n  await deleteSnippet(id);\n  redirect('/');\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAAA;;;;;;AAQO,eAAe,cAAc,EAAU;IAC5C,IAAI;QACF,cAAc;QACd,MAAM,UAAU,MAAM,qJAAM,CAAC,OAAO,CAAC,UAAU,CAAC;YAC9C,OAAO;gBAAE;YAAG;QACd;QAEA,IAAI,CAAC,SAAS;YACZ,MAAM,IAAI,MAAM;QAClB;QAEA,6BAA6B;QAC7B,MAAM,qJAAM,CAAC,OAAO,CAAC,MAAM,CAAC;YAC1B,OAAO;gBAAE;YAAG;QACd;QAEA,WAAW;QACX,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,aAAa;QAC3B,MAAM;IACR;AACF;AASO,eAAe,yBAAyB,EAAU;IACvD,MAAM,cAAc;IACpB,IAAA,iMAAQ,EAAC;AACX;;;IApCsB;IAiCA;;AAjCA,+OAAA;AAiCA,+OAAA"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///mnt/Files/Ts-space/apps/snippet-manager/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {deleteSnippet as '40aef84341dc912738bc45320a938657f30ba87467'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}