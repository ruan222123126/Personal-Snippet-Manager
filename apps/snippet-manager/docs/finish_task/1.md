根据你目前的进度（已完成首页瀑布流布局和 API），将代码片段展示部分封装为一个独立的 **`SnippetCard` 组件** 是非常必要的。这样做不仅能让 `page.tsx` 更整洁，方便后续添加“删除”、“编辑”等按钮，也能统一管理卡片的样式。

这是一个**基础且通用**的卡片组件设计方案，涵盖了标题、描述、语言标记、代码块展示和标签栏。

### 1. 创建卡片组件 (`components/SnippetCard.tsx`)

这个组件是 **Server Component**（因为它内部调用的 `CodeBlock` 包含异步高亮逻辑），直接接收数据库返回的数据对象。

在 `components` 目录下新建 `SnippetCard.tsx`（如果你的习惯是放在 `components/ui` 下也可以）：

```tsx
// components/SnippetCard.tsx
import { CodeBlock } from '@/components/ui/CodeBlock';
import { type Snippet, type Tag, type TagOnSnippet } from '@prisma/client';

// 定义 props 类型，包含关联的标签数据
type SnippetWithTags = Snippet & {
  tags: (TagOnSnippet & {
    tag: Tag;
  })[];
};

interface SnippetCardProps {
  snippet: SnippetWithTags;
}

export async function SnippetCard({ snippet }: SnippetCardProps) {
  return (
    <div className="break-inside-avoid mb-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden flex flex-col">
      
      {/* 1. 卡片头部：标题、语言和时间 */}
      <div className="p-4 border-b border-gray-100 dark:border-gray-700/50 bg-gray-50/50 dark:bg-gray-800/50">
        <div className="flex items-start justify-between gap-4">
          <div className="min-w-0"> {/* min-w-0 用于让 truncate 生效 */}
            <h3 className="text-lg font-semibold text-gray-900 dark:text-gray-100 truncate" title={snippet.title}>
              {snippet.title}
            </h3>
            {snippet.description && (
              <p className="mt-1 text-sm text-gray-500 dark:text-gray-400 line-clamp-2">
                {snippet.description}
              </p>
            )}
          </div>
          
          <div className="flex flex-col items-end gap-1.5 shrink-0">
             {/* 语言徽章 */}
            <span className="px-2 py-1 text-xs font-medium bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded">
              {snippet.language}
            </span>
          </div>
        </div>
        
        {/* 创建时间 - 放在标题下方更整洁 */}
        <div className="mt-2 text-xs text-gray-400 dark:text-gray-500">
          {new Date(snippet.createdAt).toLocaleDateString('zh-CN')}
        </div>
      </div>

      {/* 2. 代码展示区 */}
      <div className="p-0">
        {/* 注意：CodeBlock 内部自带了圆角和边框，如果觉得嵌套不协调，
           可以去 CodeBlock.tsx 去掉外层的 border/rounded 类，
           或者在这里通过 CSS 覆盖让它铺满卡片中间。
        */}
        <CodeBlock code={snippet.code} language={snippet.language} />
      </div>

      {/* 3. 底部标签栏 */}
      {snippet.tags.length > 0 && (
        <div className="p-3 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 flex flex-wrap gap-2">
          {snippet.tags.map(({ tag }) => (
            <span
              key={tag.id}
              className="px-2 py-0.5 text-xs rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border border-blue-100 dark:border-blue-800/30"
            >
              #{tag.name}
            </span>
          ))}
        </div>
      )}
    </div>
  );
}

```

### 2. 在主页中使用 (`app/page.tsx`)

现在你可以把 `app/page.tsx` 里的那一大坨 JSX 代码删掉，换成清爽的组件调用了。

```tsx
// app/page.tsx
import { getSnippets } from '@/lib/data';
import { SearchBar } from '@/components/ui/SearchBar';
import { SnippetCard } from '@/components/SnippetCard'; // 引入新写的组件

// ... interface 定义保持不变 ...

export default async function Home({ searchParams }: PageProps) {
  // 获取数据
  const snippets = await getSnippets(searchParams.q, searchParams.tag);

  return (
    <main className="min-h-screen bg-gray-50 dark:bg-black p-4 md:p-8">
      <div className="max-w-7xl mx-auto">
        {/* 头部区域 */}
        <header className="mb-8 space-y-4">
          <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
            <h1 className="text-3xl font-bold text-gray-900 dark:text-white tracking-tight">
              Snippet Vault
            </h1>
            {/* 你可以在这里放一个 Link 到 /snippets/new 的按钮 */}
          </div>
          <SearchBar />
        </header>

        {/* 瀑布流列表 */}
        {snippets.length === 0 ? (
           // ... 空状态代码保持不变 ...
           <div className="text-center py-12 text-gray-500">暂无内容</div>
        ) : (
          <div className="columns-1 md:columns-2 xl:columns-3 gap-6 space-y-6">
            {snippets.map((snippet) => (
              // 直接使用组件
              <SnippetCard key={snippet.id} snippet={snippet} />
            ))}
          </div>
        )}
      </div>
    </main>
  );
}

```

### 3. (可选) 进阶优化建议

如果你希望卡片功能更强，可以考虑以下两点：

1. **交互菜单 (Interactive Actions)**:
目前 `SnippetCard` 是服务端组件（Server Component），如果你想加一个“删除”按钮，最好创建一个单独的客户端组件 `SnippetActions.tsx`（包含删除/编辑图标），然后把它嵌入到 `SnippetCard` 的头部。
2. **点击复制全部**:
目前的 `CodeBlock` 自带复制按钮。如果你希望点击卡片任意空白处进入详情页，可以将卡片内容包裹在 Next.js 的 `<Link href={`/snippets/${snippet.id}`}>` 中。

现在，你可以把 `SnippetCard.tsx` 的代码复制进去了，看看效果是否满意！