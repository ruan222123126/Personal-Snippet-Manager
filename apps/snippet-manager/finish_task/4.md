å¤ªæ£’äº†ï¼Œç¬¬ä¸‰é˜¶æ®µçš„â€œå¯è§†åŒ–â€å·¥ä½œå·²ç»å®Œæˆï¼Œç°åœ¨ä½ çš„åº”ç”¨å·²ç»å¯ä»¥ä¼˜é›…åœ°â€œè¯»â€æ•°æ®äº†ã€‚

æ¥ä¸‹æ¥æ˜¯ **ç¬¬å››é˜¶æ®µ**ï¼Œæˆ‘ä»¬è¦è¡¥å…¨ Web ç«¯çš„â€œå†™â€èƒ½åŠ›ã€‚è™½ç„¶æ¶æ„æŠ¥å‘Šä¸­æåˆ°äº† CLI å·¥å…·ï¼Œä½†ä¸€ä¸ªå®Œæ•´çš„ Web åº”ç”¨å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªä¾¿æ·çš„å›¾å½¢åŒ–å½•å…¥ç•Œé¢ã€‚

æœ¬é˜¶æ®µç›®æ ‡ï¼š**å®ç° Web ç«¯ä»£ç ç‰‡æ®µå½•å…¥æµç¨‹**ã€‚

è¯·æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š

### ç¬¬å››é˜¶æ®µï¼šWeb å½•å…¥ä¸äº¤äº’å®Œå–„ (Creation Flow)

#### 1. æ„å»ºâ€œæ ‡ç­¾è¾“å…¥â€ç»„ä»¶ (TagInput)

æ ‡ç­¾æ˜¯è¿™ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒç»´åº¦ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å›è½¦æ·»åŠ ã€ç‚¹å‡»åˆ é™¤çš„äº¤äº’ç»„ä»¶ï¼Œè€Œä¸æ˜¯è®©ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ JSON æ•°ç»„ã€‚

* **åŠ¨ä½œ**ï¼šåˆ›å»º `components/ui/TagInput.tsx` (**Client Component**)ã€‚
* **é€»è¾‘**ï¼š
* æ¥æ”¶ `value` (string[]) å’Œ `onChange` ((tags: string[]) => void) å±æ€§ã€‚
* å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª `input` çŠ¶æ€ã€‚
* ç›‘å¬ `onKeyDown`ï¼šæŒ‰ä¸‹ `Enter` æˆ– `,` æ—¶ï¼Œå°†å½“å‰è¾“å…¥åŠ å…¥ `value` æ•°ç»„ï¼Œå¹¶æ¸…ç©ºè¾“å…¥æ¡†ã€‚
* æ¸²æŸ“å·²æœ‰çš„æ ‡ç­¾ä¸ºå°æ°”æ³¡ï¼Œç‚¹å‡»æ°”æ³¡ä¸Šçš„ `x` è§¦å‘åˆ é™¤ã€‚



#### 2. å®ç°â€œæ–°å»ºç‰‡æ®µâ€é¡µé¢

* **åŠ¨ä½œ**ï¼šåˆ›å»º `app/snippets/new/page.tsx`ã€‚
* **ç±»å‹**ï¼šè¿™æ˜¯ä¸€ä¸ª **Client Component** (`"use client"`)ï¼Œå› ä¸ºå®ƒå®Œå…¨ç”±è¡¨å•çŠ¶æ€é©±åŠ¨ã€‚
* **è¡¨å•å­—æ®µ**ï¼š
* Title (Input)
* Language (Select/Dropdown) - é€‰é¡¹å¯ä»¥ç¡¬ç¼–ç å¸¸ç”¨è¯­è¨€ï¼ˆJS, TS, Python, Rust, etc.ï¼‰ã€‚
* Description (Textarea) - å¯é€‰ã€‚
* Code (Textarea) - è¿™é‡Œå»ºè®®ä½¿ç”¨æ”¯æŒ `Tab` é”®ç¼©è¿›çš„ç®€å•å¤„ç†ï¼Œæˆ–è€…ç›´æ¥ç”¨ç­‰å®½å­—ä½“çš„ Textareaã€‚
* Tags - ä½¿ç”¨ä¸Šé¢çš„ `TagInput`ã€‚


* **æäº¤é€»è¾‘**ï¼š
* ç‚¹å‡»â€œSaveâ€æŒ‰é’®åï¼Œæ”¶é›† stateã€‚
* å‘é€ `POST` è¯·æ±‚åˆ° `/api/snippets`ã€‚
* æˆåŠŸåä½¿ç”¨ `useRouter().push('/')` è·³è½¬å›ä¸»é¡µï¼Œå¹¶ `router.refresh()` åˆ·æ–°æ•°æ®ã€‚



#### 3. æ·»åŠ å…¥å£æŒ‰é’®

* **åŠ¨ä½œ**ï¼šä¿®æ”¹ `app/page.tsx`ã€‚
* **ä»»åŠ¡**ï¼š
* åœ¨é¡µé¢å³ä¸Šè§’æˆ–å³ä¸‹è§’æ·»åŠ ä¸€ä¸ªæ˜¾çœ¼çš„â€œæ–°å»ºâ€æŒ‰é’®ï¼ˆFloating Action Button æˆ– Header æŒ‰é’®ï¼‰ã€‚
* é“¾æ¥æŒ‡å‘ `/snippets/new`ã€‚



---

### ğŸ’¡ æ ¸å¿ƒä»£ç å‚è€ƒ (Code Snippets)

**1. `components/ui/TagInput.tsx**`

```typescript
'use client';
import { useState, KeyboardEvent } from 'react';
import { XMarkIcon } from '@heroicons/react/24/outline';

interface Props {
  tags: string[];
  setTags: (tags: string[]) => void;
}

export function TagInput({ tags, setTags }: Props) {
  const [input, setInput] = useState('');

  const handleKeyDown = (e: KeyboardEvent) => {
    if ((e.key === 'Enter' || e.key === ',') && input.trim()) {
      e.preventDefault();
      if (!tags.includes(input.trim())) {
        setTags([...tags, input.trim()]);
      }
      setInput('');
    } else if (e.key === 'Backspace' && !input && tags.length > 0) {
      setTags(tags.slice(0, -1));
    }
  };

  const removeTag = (tagToRemove: string) => {
    setTags(tags.filter(tag => tag !== tagToRemove));
  };

  return (
    <div className="flex flex-wrap items-center gap-2 p-2 border rounded-md focus-within:ring-2 ring-blue-500 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-700">
      {tags.map(tag => (
        <span key={tag} className="flex items-center gap-1 px-2 py-1 text-sm bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full">
          #{tag}
          <button onClick={() => removeTag(tag)} className="hover:text-blue-600">
            <XMarkIcon className="w-3 h-3" />
          </button>
        </span>
      ))}
      <input
        type="text"
        value={input}
        onChange={e => setInput(e.target.value)}
        onKeyDown={handleKeyDown}
        placeholder={tags.length === 0 ? "Add tags (press Enter)..." : ""}
        className="flex-1 min-w-[120px] outline-none bg-transparent text-sm"
      />
    </div>
  );
}

```

**2. `app/snippets/new/page.tsx` (è¡¨å•é€»è¾‘)**

```typescript
'use client';
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { TagInput } from '@/components/ui/TagInput';

export default function CreateSnippetPage() {
  const router = useRouter();
  const [formData, setFormData] = useState({
    title: '',
    code: '',
    language: 'javascript',
    description: '',
  });
  const [tags, setTags] = useState<string[]>([]);
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);
    
    try {
      const res = await fetch('/api/snippets', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ...formData, tags }),
      });
      
      if (!res.ok) throw new Error('Failed to create');
      
      router.refresh(); // åˆ·æ–°æœåŠ¡ç«¯æ•°æ®
      router.push('/'); // è·³è½¬å›ä¸»é¡µ
    } catch (error) {
      console.error(error);
      alert('Something went wrong');
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <div className="max-w-2xl mx-auto p-6">
      <h1 className="text-2xl font-bold mb-6">New Snippet</h1>
      <form onSubmit={handleSubmit} className="space-y-6">
        {/* Title Input */}
        <div>
          <label className="block text-sm font-medium mb-1">Title</label>
          <input 
            required
            className="w-full p-2 border rounded-md dark:bg-gray-900 dark:border-gray-700"
            value={formData.title} 
            onChange={e => setFormData({...formData, title: e.target.value})}
          />
        </div>
        
        {/* Language & Tags Row */}
        <div className="grid grid-cols-2 gap-4">
           <div>
             <label className="block text-sm font-medium mb-1">Language</label>
             <select 
               className="w-full p-2 border rounded-md dark:bg-gray-900 dark:border-gray-700"
               value={formData.language}
               onChange={e => setFormData({...formData, language: e.target.value})}
             >
               <option value="javascript">JavaScript</option>
               <option value="typescript">TypeScript</option>
               <option value="python">Python</option>
               <option value="rust">Rust</option>
               {/* Add more... */}
             </select>
           </div>
           <div>
             <label className="block text-sm font-medium mb-1">Tags</label>
             <TagInput tags={tags} setTags={setTags} />
           </div>
        </div>

        {/* Code Input */}
        <div>
          <label className="block text-sm font-medium mb-1">Code</label>
          <textarea 
            required
            rows={10}
            className="w-full p-2 border rounded-md font-mono text-sm dark:bg-gray-900 dark:border-gray-700"
            value={formData.code}
            onChange={e => setFormData({...formData, code: e.target.value})}
          />
        </div>

        <button 
          disabled={isSubmitting}
          type="submit" 
          className="w-full bg-black dark:bg-white text-white dark:text-black py-2 rounded-md hover:opacity-90 disabled:opacity-50"
        >
          {isSubmitting ? 'Saving...' : 'Create Snippet'}
        </button>
      </form>
    </div>
  );
}

```

---

### âœ… éªŒæ”¶æ ‡å‡†

å®Œæˆè¿™ä¸€æ­¥åï¼š

1. **æµç¨‹è·‘é€š**ï¼šç‚¹å‡»ä¸»é¡µâ€œæ–°å»ºâ€ -> å¡«å†™è¡¨å• -> æäº¤ -> è‡ªåŠ¨è·³å›ä¸»é¡µ -> çœ‹åˆ°æ–°æ·»åŠ çš„å¡ç‰‡ã€‚
2. **æ ‡ç­¾äº¤äº’**ï¼šè¾“å…¥æ ‡ç­¾æ—¶ä½“éªŒé¡ºæ»‘ï¼Œæ”¯æŒå¤šä¸ªæ ‡ç­¾ã€‚
3. **è§†è§‰å®Œæ•´**ï¼šåº”ç”¨æ‹¥æœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„å®Œæ•´é—­ç¯ï¼ˆCRUD ä¸­çš„ CRï¼‰ã€‚

**å®Œæˆåï¼Œè¯·å‘Šè¯‰æˆ‘ä½ æ˜¯å¦æˆåŠŸåˆ›å»ºäº†ä¸€æ¡æ•°æ®ï¼Œä½“éªŒå¦‚ä½•ï¼Ÿ**